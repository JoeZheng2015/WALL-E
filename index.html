<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>WALL-E</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }
        .rest {
            color: red;
        }
    </style>
</head>
<body>
    <header>
        只剩<span class="rest">100</span>天
    </header>

    <script>
        document.addEventListener("DOMContentLoaded", init)

        function init() {
            const BEGIN = 1489507200001
            const NUMBER_OF_DAY = 100
            const progress = getProgress(Date.now(), getDays(BEGIN, NUMBER_OF_DAY))
            setProgress(progress, NUMBER_OF_DAY)
        }


        function getDays(begin, NUMBER_OF_DAY) {
            let result = []
            const beginDate = new Date(begin)
            let n = 0

            while(result.length < NUMBER_OF_DAY) {
                const date = new Date(begin).setDate(beginDate.getDate() + n)
                if (isWeekday(date)) {
                    result.push(date)
                }
                n++
            }

            return result
        }

        function isWeekday(date) {
            const day = new Date(date).getDay()

            return 0 < day && day < 6
        }

        function getProgress(now, days) {
            return days.findIndex(day => day > now)
        }

        function setProgress(progress, total) {
            const rest = total - progress
            const $rest = document.querySelector('.rest')

            $rest.textContent = rest
        }
    </script>
</body>
</html>